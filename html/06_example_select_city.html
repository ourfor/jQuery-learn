<!DOCTYPE html>
<html>
    <head>
        <title>省市选择</title>
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <script src="../lib/jquery.js"></script>
    </head>
    <body>

        <select name='proSel'>
        </select>
        <select name='citySel'>
        </select>
        
        <script>
            let data = [
                {
                    name: "湖南",
                    city: [
                        "长沙",
                        "株洲",
                        "湘潭"
                    ]
                },
                {
                    name: "北京",
                    city: [
                        "北京"
                    ]
                },
                {
                    name: "湖北",
                    city: [
                        "武汉",
                        "仙桃"
                    ]
                },
                {
                    name: "安徽",
                    city: [
                        "合肥"
                    ]
                }
            ];

            $(()=>{
                initPro();
            });


            function initPro(){
                let proSelArray = [];
                data.forEach((item,index,array)=>{
                    let str = "<option value='" + item.name + "'>" + item.name + "</option>";
                    proSelArray.push(str);
                });
                
                $('select[name=proSel]').html(proSelArray.join(""));

                $('select[name=proSel]').change(function(){
                    let prov = $(this).val();
                    data.some((item,index,array)=>{
                        if(item.name === prov){
                            let citySelArray = [];
                            item.city.forEach((item,index,array)=>{
                                let str = "<option value='" + item + "'>" + item + "</option>";
                                citySelArray.push(str);
                            });
                            $('select[name=citySel]').html(citySelArray.join(""));

                        }
                    });

                }).triggerHandler('change');
            }

        </script>
    </body>
</html>